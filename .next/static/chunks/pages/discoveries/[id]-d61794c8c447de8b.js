(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{8086:function(t,n,e){"use strict";var r=e(5318);n.Z=void 0;var o=r(e(4938)),c=e(5893),i=(0,o.default)((0,c.jsx)("path",{d:"m16.81 8.94-3.75-3.75L4 14.25V18h3.75l9.06-9.06zM6 16v-.92l7.06-7.06.92.92L6.92 16H6zm13.71-9.96c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM2 20h20v4H2z"}),"BorderColorOutlined");n.Z=i},4746:function(t,n,e){"use strict";var r=e(5318);n.Z=void 0;var o=r(e(4938)),c=e(5893),i=(0,o.default)((0,c.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM20 4v13.17L18.83 16H4V4h16zM6 12h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"}),"CommentOutlined");n.Z=i},619:function(t,n,e){"use strict";var r=e(5318);n.Z=void 0;var o=r(e(4938)),c=e(5893),i=(0,o.default)((0,c.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9v7c0 1.1.9 2 2 2h4v-8H5v-1c0-3.87 3.13-7 7-7s7 3.13 7 7v1h-4v8h4c1.1 0 2-.9 2-2v-7c0-4.97-4.03-9-9-9z"}),"Headphones");n.Z=i},7758:function(t,n,e){"use strict";var r=e(5318);n.Z=void 0;var o=r(e(4938)),c=e(5893),i=(0,o.default)((0,c.jsx)("path",{d:"M21 8h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2zm0 4-3 7H9V9l4.34-4.34L12.23 10H21v2zM1 9h4v12H1z"}),"ThumbUpAltOutlined");n.Z=i},1605:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/discoveries/[id]",function(){return e(8923)}])},8923:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSP:function(){return C},default:function(){return G}});var r=e(5893),o=e(4051),c=e.n(o),i=e(7294),s=e(1163),a=e(1664),l=e(7357),u=e(9661),x=e(5861),d=e(3538),h=e(7720),p=e(3321),v=e(4054),f=e(89),m=e(4746),g=e(7758),j=e(8086),b=e(619),Z=e(8210),w=e(7426),y=e(9061),M=e(2055);function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function D(t,n,e,r,o,c,i){try{var s=t[c](i),a=s.value}catch(l){return void e(l)}s.done?n(a):Promise.resolve(a).then(r,o)}function k(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var c=t.apply(n,e);function i(t){D(c,r,o,i,s,"next",t)}function s(t){D(c,r,o,i,s,"throw",t)}i(void 0)}))}}function N(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function O(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){N(t,n,e[n])}))}return t}function S(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(t){var n=t.data,e=t.api,o=t.updateLike,s=t.commentInputRef,a=(0,i.useState)(!1),h=a[0],p=a[1],v=function(){var t=k(c().mark((function t(n){var r,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.likeComment(n);case 2:return r=t.sent,t.prev=3,t.next=6,r.data;case 6:if(!(i=t.sent).error){t.next=10;break}return p(!0),t.abrupt("return");case 10:o(i.data),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),p(!0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(n){return t.apply(this,arguments)}}();return(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("flex-start","flex-start"),{columnGap:"11px"}),children:[(0,r.jsx)(l.Z,{children:(0,r.jsx)(u.Z,{sx:{width:"35px",height:"35px"},alt:"img alt",src:n.user?n.user.avatar.thumb_url:""})}),(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","flex-starrt"),{flexDirection:"column",rowGap:"15px"}),children:[(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","flex-start"),{flexDirection:"column",rowGap:"8px",padding:"15px",bgcolor:w.DM.bg2,borderRadius:"10px"}),children:[n.user&&(0,r.jsxs)(x.Z,{sx:O({},w.gN.title1,{color:w.DM.white}),children:[n.user.first_name," ",n.user.last_name]}),(0,r.jsx)(x.Z,{style:O({},w.gN.content1,{color:w.DM.VZ_Text_content}),children:n.content})]}),(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("flex-start","center"),{columnGap:"31px"}),children:[(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","center"),{columnGap:"8px",cursor:"pointer"}),children:[(0,r.jsx)(m.Z,{sx:{color:w.DM.contentIcon,width:"14px",height:"14px"}}),(0,r.jsx)(x.Z,{onClick:function(){s.current.children[1].focus()},sx:O({},w.gN.content3,{color:w.DM.contentIcon}),children:"Tr\u1ea3 l\u1eddi"})]}),(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","center"),{columnGap:"8px",cursor:"pointer"}),children:[(0,r.jsx)(g.Z,{onClick:function(){v(n.id)},sx:{color:n.is_liked?w.DM.main:w.DM.contentIcon,width:"14px",height:"14px"}}),(0,r.jsx)(x.Z,{sx:O({},w.gN.content3,{color:w.DM.contentIcon}),children:n.comment_likes_count})]}),(0,r.jsx)(l.Z,{sx:O({},(0,Z.X)("center","center"),{columnGap:"8px"}),children:(0,r.jsx)(x.Z,{sx:O({},w.gN.content3,{color:w.DM.contentIcon}),children:n.published_at})})]})]}),(0,r.jsx)(d.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:h,onClose:function(){p(!1)},message:"Th\xedch \u0111\xe1nh gi\xe1 kh\xf4ng th\xe0nh c\xf4ng, vui l\xf2ng th\u1eed l\u1ea1i!"},"bottomcenter")]})};function z(t){var n,e,o,_,D,N,z=t.discovery,C=new M.Z,G=(0,y.Z)(),H=(0,i.useRef)(),I=(0,i.useState)([]),T=I[0],A=I[1],P=(0,i.useState)(""),E=P[0],L=P[1],R=(0,i.useState)(0),V=R[0],U=(R[1],(0,i.useState)(!1)),F=U[0],$=U[1],q=(0,s.useRouter)().query.id,B=G.width<=w.nN.sm,K=B?200:380;(0,i.useEffect)((function(){function t(){return(t=k(c().mark((function t(){var n,e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getDiscoveryComment(q);case 2:return n=t.sent,t.next=5,n.data.data;case 5:e=t.sent,A(e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[V]);var W=function(){var t=k(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==n.keyCode){t.next=4;break}return t.next=4,tt(z.id,{content:E});case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),J=function(){var t=k(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(z.id,{content:E});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(t){var n=S(T),e=n.findIndex((function(n){return n.id===t.id}));n[e]=t,A(n)},Y=function(t){A([t].concat(S(T)))};function tt(t,n){return nt.apply(this,arguments)}function nt(){return(nt=k(c().mark((function t(n,e){var r,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.commentDiscovery(n,e);case 2:return r=t.sent,t.prev=3,t.next=6,r.data;case 6:if(!(o=t.sent).error){t.next=11;break}return $(!0),console.log(o.error),t.abrupt("return");case 11:Y(o.data),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),$(!0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","center"),{flexDirection:"column"}),children:[(0,r.jsx)(l.Z,{sx:{height:"".concat(K,"px"),width:"100%",top:0},children:(0,r.jsx)("img",{style:{objectFit:"cover",width:"100%",height:"100%",left:0},alt:"cover img alt",src:null===z||void 0===z||null===(n=z.image)||void 0===n?void 0:n.original_url})}),(0,r.jsx)(l.Z,{sx:{width:"100%",bgcolor:w.DM.bg2},children:(0,r.jsxs)(l.Z,{sx:{width:B?"90%":"60%",margin:"0 auto"},children:[(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("flex-start","center"),{columnGap:"16px",margin:B?"24px 0 16px 0":"24px 0"}),children:[(0,r.jsx)(l.Z,{children:(0,r.jsx)(u.Z,{sx:{width:"48px",height:"48px"},alt:"discovery avt alt",src:null===z||void 0===z||null===(e=z.channel)||void 0===e||null===(o=e.avatar)||void 0===o?void 0:o.thumb_url})}),(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","flex-start"),{flexDirection:"column",rowGap:"6px"}),children:[(0,r.jsx)(x.Z,{sx:O({},w.gN.h3,{color:w.DM.white}),children:null===z||void 0===z||null===(_=z.channel)||void 0===_?void 0:_.name}),(0,r.jsx)(x.Z,{sx:O({},w.gN.content2,{color:w.DM.contentIcon}),children:null===z||void 0===z?void 0:z.published_at})]})]}),(0,r.jsx)(h.Z,{sx:{border:"1px solid ".concat(w.DM.blackStroker),mb:B?"16px":"24px"}}),(0,r.jsx)(x.Z,{sx:O({},B?w.gN.content2:w.gN.content1,{color:w.DM.white,mb:B?"19px":"16px"}),children:null===z||void 0===z?void 0:z.summary})]})}),z.discovery_contents&&z.discovery_contents.map((function(t){var n;return(0,r.jsxs)(l.Z,{sx:{width:B?"90%":"60%",margin:"0 auto"},children:[(0,r.jsx)(x.Z,{sx:O({},B?w.gN.title1:w.gN.h2,{color:w.DM.white,margin:B?"33px auto 24px auto":"48px auto"}),children:null===t||void 0===t?void 0:t.title}),(0,r.jsxs)(l.Z,{sx:{height:"329px",width:"100%",top:0,position:"relative"},children:[(0,r.jsx)("img",{style:{objectFit:"cover",width:"100%",height:"100%",left:0},alt:"cover img alt",src:t.avatar&&(null===t||void 0===t?void 0:t.avatar.thumb_url)}),(0,r.jsx)(a.default,{style:{position:"absolute",bottom:"10px",right:"10px",textDecoration:"none"},href:"/playlists/".concat(null===t||void 0===t||null===(n=t.playlist)||void 0===n?void 0:n.id),children:(0,r.jsx)(p.Z,{sx:O({},w.gN.title2,{color:w.DM.white,bgcolor:w.DM.main,textTransform:"none",height:"48px",width:"150px",borderRadius:"48px",":hover":{bgcolor:"rgb(56 57 68 / 93%)"}}),startIcon:(0,r.jsx)(b.Z,{sx:{color:w.DM.white}}),children:"Nghe s\xe1ch"})})]}),(0,r.jsx)(x.Z,{sx:O({},B?w.gN.content2:w.gN.content1,{color:w.DM.VZ_Text_content,margin:B?"23px auto 16px auto":"48px auto 32px auto",whiteSpace:"pre-wrap"}),children:null===t||void 0===t?void 0:t.content})]},null===t||void 0===t?void 0:t.id)})),(0,r.jsx)(l.Z,{sx:{width:B?"100%":"60%",margin:"0 auto"},children:(0,r.jsxs)(l.Z,{sx:O({bgcolor:w.DM.bg2,padding:B?"16px":"20px"},(0,Z.X)("space-between","center"),{mb:B?"24px":"30px"}),children:[(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","center"),{columnGap:"8px"}),children:[(0,r.jsx)(m.Z,{sx:{color:w.DM.white,width:"14px",height:"14px"}}),(0,r.jsxs)(x.Z,{sx:O({},w.gN.content2,{color:w.DM.white}),children:[null===z||void 0===z||null===(D=z.discovery_counter)||void 0===D?void 0:D.comments_count," g\xf3p \xfd"]})]}),(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("center","center"),{columnGap:"8px"}),children:[(0,r.jsx)(g.Z,{sx:{color:w.DM.white,width:"14px",height:"14px"}}),(0,r.jsxs)(x.Z,{sx:O({},w.gN.content2,{color:w.DM.white}),children:[null===z||void 0===z||null===(N=z.discovery_counter)||void 0===N?void 0:N.likes_count," th\xedch"]})]})]})}),(0,r.jsxs)(l.Z,{sx:{width:B?"90%":"60%",margin:"0 auto"},children:[(0,r.jsx)(l.Z,{sx:O({},(0,Z.X)("center","flex-start"),{flexDirection:"column",rowGap:"34px"}),children:T.map((function(t){return(0,r.jsx)(X,{commentInputRef:H,updateLike:Q,api:C,data:t},t.id)}))}),(0,r.jsxs)(l.Z,{sx:O({},(0,Z.X)("flex-start","center"),{columnGap:B?"16px":"31px",mt:"40px"}),children:[(0,r.jsx)(v.Z,{fullWidth:!0,variant:"standard",children:(0,r.jsx)(f.Z,{sx:{height:"40px",border:"1px solid ".concat(w.DM.placeHolder),color:w.DM.placeHolder,borderRadius:"24px",padding:"0 16px",boxSizing:"border-box","& .MuiInput-input":O({padding:"13px 16px"},w.gN.caption12)},ref:H,disableUnderline:!0,id:"discovery-comment",value:E,placeholder:"G\u1eedi g\xf3p \xfd cho n\u1ed9i dung n\xe0y",onChange:function(t){var n=t.target.value;L(n)},onKeyUp:W,startAdornment:(0,r.jsx)(j.Z,{sx:{color:w.DM.placeHolder},position:"start",children:"$"})})}),(0,r.jsx)(p.Z,{onClick:J,sx:O({},w.gN.title3,{color:w.DM.VZ_Text_content,textTransform:"none"}),children:"G\u1eedi"})]})]}),(0,r.jsx)(d.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:F,onClose:function(){$(!1)},message:"\u0110\xe1nh gi\xe1 kh\xf4ng th\xe0nh c\xf4ng, vui l\xf2ng th\u1eed l\u1ea1i sau!"},"bottomcenter")]})}var C=!0,G=function(t){var n=t.discovery;return(0,r.jsx)(z,{discovery:n})}}},function(t){t.O(0,[538,774,888,179],(function(){return n=1605,t(t.s=n);var n}));var n=t.O();_N_E=n}]);